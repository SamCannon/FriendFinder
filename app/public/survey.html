<!DOCTYPE html>
<html>

	<head>

		<title></title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	</head>

	<body>

		<div class="container">



			<h2>Survey Questions</h2>

			<hr>

			<h3><strong>About You</strong></h3>

			<form action="" id="friendForm">

				<h4>Name (Required)</h4>

				<input type="text" name="" id="name" class="form-control" required >

				<h4>Link to Photo Image (Required)</h4>

				<input type="text" name="" id="photo" class="form-control" required >

				<hr>

				<h3><strong>Question 1</strong></h3>

				<h4>You find yourself day dreaming a lot.</h4>

				<select data-placeholder="" class="chosen-select" id="q1">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 2</strong></h3>

				<h4>You desire to learn the language of some other race in a fantasy book.</h4>

				<select data-placeholder="" class="chosen-select" id="q2">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 3</strong></h3>

				<h4>You find yourself frustrated with people lack of attention to the words they speak.</h4>

				<select data-placeholder="" class="chosen-select" id="q3">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 4</strong></h3>

				<h4>You rarely do something just out of sheer curiosity.</h4>

				<select data-placeholder="" class="chosen-select" id="q4">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 5</strong></h3>

				<h4>You prefer elves to people.</h4>

				<select data-placeholder="" class="chosen-select" id="q5">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 6</strong></h3>

				<h4>It is often difficult for you to choose the "dark/bad side" in an MMO.</h4>

				<select data-placeholder="" class="chosen-select" id="q6">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 7</strong></h3>

				<h4>The thought of interstellar travel enthralls you.</h4>

				<select data-placeholder="" class="chosen-select" id="q7">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 8</strong></h3>

				<h4>You rarely get carried away by fantasies and ideas.</h4>

				<select data-placeholder="" class="chosen-select" id="q8">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 9</strong></h3>

				<h4>You respect people who prefer the movie to the book.</h4>

				<select data-placeholder="" class="chosen-select" id="q9">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<h3><strong>Question 10</strong></h3>

				<h4>You feel more energetic after the hero triumphs.</h4>

				<select data-placeholder="" class="chosen-select" id="q10">

					<option value=""></option>

					<option value="1">1 (Strongly Disagree)</option>

					<option value="2">2</option>

					<option value="3">3</option>

					<option value="4">4</option>

					<option value="5">5 (Strongly Agree)</option>

				</select>

				<br>

				<br>

				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>Submit</button>

			</form>

			<hr>

			<footer class="footer">


			</footer>

		</div>

		<div id="resultsModal" class="modal fade" role="dialog">
			
			<div class="modal-dialog">

				<div class="modal-content">

					<div class="modal-header">

						<button type="button" class="close" data-dismiss="modal">&times;</button>

						<h2 class="modal-title"><strong>Best Match</strong></h2>

					</div>

					<div class="modal-body">

						<h2 id="matchName"></h2>

						<img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">

					</div>

					<div class="modal-footer">

						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

					</div>

				</div>

			</div>

		</div>

		<div id="" class="modal" role="dialog">
			
			<div class="modal-dialog">
				
				<div class="modal-content">
					
					<div class="modal-header">
						
						<button type="button" class="close" data-dismiss="modal">&times;</button>

						<h2 class="modal-title">Best Match</h2>

					</div>

					<div class="modal-body">

						<h2 id="matchName"></h2>

						<img id="matchImg" src="" height="300px" />
						
					</div>

					<div class="modal-footer">
						
						<button type="button" class="bt btn-default" data-dismiss="modal">Close</button>

					</div>

				</div>

			</div>

		</div>


		<!------------------------------------------------------------------------------------------------------------------------------------------>
		<!------------------------------------------------------------------------------------------------------------------------------------------>
		<!------------------------------------------------------------------------------------------------------------------------------------------>
		

		<script type="text/javascript">
			
			$("#friendForm").submit("click", (e) => {

				e.preventDefault();

				let validation = () => {

					let isValid = true;

					$(".form-control").each(() => {

						if((this).val === "") {


							isValid = false;

							alert("Please fill out your name and add a picture.");

						};

					});

					let test = $(".chosen-select");

					$(".chosen-select").each((i, option) => {

						if(option.value === "") {

							isValid = false;

						};

					});

					return isValid;
					
				};


				if(validation()) {

					let name = $("#name").val();
					let photo = $("#photo").val();

					let userInput = {

						name: name,
						photo: photo,
						scores: [
						$("#q1").val(),
						$("#q2").val(),
						$("#q3").val(),
						$("#q4").val(),
						$("#q5").val(),
						$("#q6").val(),
						$("#q7").val(),
						$("#q8").val(),
						$("#q9").val(),
						$("#q10").val()
						]

					};

					var currentURL = window.location.origin;

					$.post(currentURL + "/api/matches", userInput, (data) => {

						console.log(data.pic);

						$("#matchName").text(data.name);

						$("#matchImg").attr("src", data.pic);

						$("#resultsModal").modal("toggle");

					});

				} else {

					alert("Please make sure you answer all questions.");

				};

			});

		</script>

	</body>

</html>